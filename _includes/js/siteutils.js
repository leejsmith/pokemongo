function recalcParallax(t,e){var a=$(window).scrollTop();for(i=0;i<e.length-1;i++){var s=e[i].split(":"),l=s[0],o=s[1];o.indexOf("px")>0?(o=o.replace("px","")*a+"px",t.css(l,o)):(o*=a,"opacity"===l&&o>=1&&(o=1),"opacity"===l&&0>=o&&(o=0),t.css(l,o))}}function retestVisibility(t){var e=t.attr("data-visible").split("--"),a=$(e[0]),s=e[0].replace(".","")+"--"+e[1],i=e.length>2?e[0].replace(".","")+"--"+e[2]:!1,l=t.visible();l&&!a.hasClass(s)?(a.addClass(s),i&&a.removeClass(i)):!l&&a.hasClass(s)?(a.removeClass(s),i&&a.addClass(i)):!i||l||a.hasClass(i)||a.removeClass(s).addClass(i)}function resizeImage(t,e){if(void 0!==t.attr("src")){var a=new Image;a.onload=function(){var s=a.width/a.height,i=e.width()+10,l=e.height()+10;a=null,parseInt(i/s)<l?t.css({width:parseInt(l*s)+"px",height:parseInt(l)+"px",opacity:1,position:"absolute",top:"50%",left:"50%","margin-top":"-"+parseInt(l/2)+"px","margin-left":"-"+parseInt(l*s/2)+"px"}):t.css({width:parseInt(i)+"px",height:parseInt(i/s)+"px",opacity:1,position:"absolute",top:"50%",left:"50%","margin-top":"-"+parseInt(i/s/2)+"px","margin-left":"-"+parseInt(i/2)+"px"})},a.src=t.attr("src")}}$.fn.extend({visible:function(t){var e=$(window).scrollTop(),a=e+$(window).height(),s=$(this).offset().top,i=s+$(this).outerHeight();return a>=s&&i>=e}}),function(t){var e,a,s=t.event;e=s.special.debouncedresize={setup:function(){t(this).on("resize",e.handler)},teardown:function(){t(this).off("resize",e.handler)},handler:function(t,i){var l=this,o=arguments,n=function(){t.type="debouncedresize",s.dispatch.apply(l,o)};a&&clearTimeout(a),i?n():a=setTimeout(n,e.threshold)},threshold:150}}(jQuery),$(window).on("load debouncedresize scroll",function(t){$("*[data-parallax]").each(function(){recalcParallax($(this),$(this).attr("data-parallax").split(";"))}),$("*[data-visible]").each(function(){retestVisibility($(this))})}),$(document).on("load","img[data-fill]",function(t){resizeImage($(this),$($(this).attr("data-fill")))}),$(window).on("load resize",function(t){$("img[data-fill]").each(function(){resizeImage($(this),$($(this).attr("data-fill"))),$(document).off("load",$(this))})});var $viewport=$("html, body");$viewport.on("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(t.which>0||"mousedown"===t.type||"mousewheel"===t.type)&&$viewport.stop()}),$(window).load(function(){$("a[data-scroll]").on("click",function(t){t.preventDefault();var e=$(this),a=$(e.attr("data-scroll")).length>0?$(e.attr("data-scroll")):$("a[name="+e.attr("data-scroll").replace("#","")+"]"),s=a.offset().top,i=s-$(document).scrollTop();0>i&&(i=-i),$viewport.animate({scrollTop:s+"px"},{duration:i})}),$("button[data-toggle]").on("click",function(t){console.log(e);var e=$(this).attr("data-toggle").split("--"),a=$(e[0]+(e.length>2?"--"+e[1]:""));a.toggleClass(e[0].replace(".","")+"--"+e[e.length-1])}),$("button[data-add]").on("click",function(t){var e=$(this).attr("data-add").split("--"),a=$(e[0]+(e.length>2?"--"+e[1]:""));a.addClass(e[0].replace(".","")+"--"+e[e.length-1])}),$("button[data-remove]").on("click",function(t){var e=$(this).attr("data-remove").split("--"),a=$(e[0]+(e.length>2?"--"+e[1]:""));a.removeClass(e[0].replace(".","")+"--"+e[e.length-1])}),$("button[data-tab]").on("click",function(t){var e=$(this).attr("data-tab").split("--");$(e[0]+"--"+e[1]).hasClass(e[0].replace(".","")+"--"+e[e.length-1])?$(e[0]).removeClass(e[0].replace(".","")+"--"+e[e.length-1]):($(e[0]).removeClass(e[0].replace(".","")+"--"+e[e.length-1]),$(e[0]+"--"+e[1]).addClass(e[0].replace(".","")+"--"+e[e.length-1]))}),$("menu[data-select]>ul").on("click",function(t){t.stopPropagation()}),$("menu[data-select]>div").on("click",function(t){t.stopPropagation();var e=$(this).parent("menu"),a=function(){e.addClass("ui_select--selected"),$("body").on("click",s)},s=function(){e.removeClass("ui_select--selected"),$("body").off("click",s)};e.hasClass("ui_select--selected")?s():a()})});